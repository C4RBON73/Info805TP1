plugins {
    id 'java'
    //id 'eclipse'
    id "org.xbib.gradle.plugin.jflex" version "1.7.0"
}

repositories {
    // You can declare any Maven/Ivy/file repository here.
    mavenCentral()
}

configurations {
    jflexGeneration
}


sourceSets {
    main {
        java {
            sourceCompatibility = 1.8
            targetCompatibility = 1.8
            // srcDir 'src/main/java'
        }
        jflex {
            // srcDir 'src/main/jflex'
        }
        test {
        }
    }
}

jflex {
    no_backup = true
    encoding = 'UTF-8'
    verbose = true
}

compileJava.options.encoding = 'UTF-8'

jar {
    manifest {
        attributes  'Main-Class': 'fr.usmb.compilation.jflex.calc.standalone.Calc'
    }
}

build.mustRunAfter clean

// Integration avec eclipse
// on configure le plugin eclipse s'il est actif
pluginManager.withPlugin('eclipse'){
    // tasks to run when build automatically is enabled
    eclipse.autoBuildTasks([tasks.named('generateCup'), tasks.named('generateJflex')])
}
